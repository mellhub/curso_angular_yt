{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Cursos\\\\Youtube\\\\CursoAngular13Introducao-01-2022\\\\moments\\\\moments\\\\curso_angular_yt\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/moment/moment.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/app/services/messages/messages.service\";\nexport class NewMomentComponent {\n  constructor(momentService, router, messagesService) {\n    this.momentService = momentService;\n    this.router = router;\n    this.messagesService = messagesService;\n    this.btnText = 'Compartilhar!';\n  }\n\n  ngOnInit() {}\n\n  onFileSelected(event) {\n    const file = event.target.files[0];\n    this.image = file;\n  }\n\n  buildForm() {}\n\n  createHandler(moment) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const formData = new FormData();\n      formData.append('title', moment.title);\n      formData.append('description', moment.description);\n\n      if (moment.image) {\n        formData.append('image', moment.image);\n      }\n\n      yield _this.momentService.createMoment(formData).subscribe();\n\n      _this.messagesService.add(`Momento adicionado com sucesso!`);\n\n      _this.router.navigate(['/']);\n    })();\n  }\n\n}\n\nNewMomentComponent.ɵfac = function NewMomentComponent_Factory(t) {\n  return new (t || NewMomentComponent)(i0.ɵɵdirectiveInject(i1.MomentService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.MessagesService));\n};\n\nNewMomentComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: NewMomentComponent,\n  selectors: [[\"app-new-moment\"]],\n  decls: 6,\n  vars: 1,\n  consts: [[3, \"btnText\", \"onSubmit\"]],\n  template: function NewMomentComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h2\");\n      i0.ɵɵtext(1, \"Compartilhe o seu \");\n      i0.ɵɵelementStart(2, \"span\");\n      i0.ɵɵtext(3, \"momento\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(4, \"!\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"app-moments-form\", 0);\n      i0.ɵɵlistener(\"onSubmit\", function NewMomentComponent_Template_app_moments_form_onSubmit_5_listener($event) {\n        return ctx.createHandler($event);\n      });\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"btnText\", ctx.btnText);\n    }\n  },\n  styles: [\"h2[_ngcontent-%COMP%] {\\r\\n  text-align: center;\\r\\n  margin-bottom: 1em;\\r\\n  font-size: 2.2em;\\r\\n}\\r\\n\\r\\nh2[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\r\\n  color: #dec129;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5ldy1tb21lbnQuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGtCQUFrQjtFQUNsQixrQkFBa0I7RUFDbEIsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UsY0FBYztBQUNoQiIsImZpbGUiOiJuZXctbW9tZW50LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyJoMiB7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gIG1hcmdpbi1ib3R0b206IDFlbTtcclxuICBmb250LXNpemU6IDIuMmVtO1xyXG59XHJcblxyXG5oMiBzcGFuIHtcclxuICBjb2xvcjogI2RlYzEyOTtcclxufSJdfQ== */\"]\n});","map":{"version":3,"sources":["C:/Cursos/Youtube/CursoAngular13Introducao-01-2022/moments/moments/curso_angular_yt/src/app/components/pages/new-moment/new-moment.component.ts"],"names":["i0","i1","i2","i3","NewMomentComponent","constructor","momentService","router","messagesService","btnText","ngOnInit","onFileSelected","event","file","target","files","image","buildForm","createHandler","moment","formData","FormData","append","title","description","createMoment","subscribe","add","navigate","ɵfac","NewMomentComponent_Factory","t","ɵɵdirectiveInject","MomentService","Router","MessagesService","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","NewMomentComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","NewMomentComponent_Template_app_moments_form_onSubmit_5_listener","$event","ɵɵadvance","ɵɵproperty","styles"],"mappings":"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","sourcesContent":["import * as i0 from \"@angular/core\";\r\nimport * as i1 from \"src/app/services/moment/moment.service\";\r\nimport * as i2 from \"@angular/router\";\r\nimport * as i3 from \"src/app/services/messages/messages.service\";\r\nexport class NewMomentComponent {\r\n    constructor(momentService, router, messagesService) {\r\n        this.momentService = momentService;\r\n        this.router = router;\r\n        this.messagesService = messagesService;\r\n        this.btnText = 'Compartilhar!';\r\n    }\r\n    ngOnInit() { }\r\n    onFileSelected(event) {\r\n        const file = event.target.files[0];\r\n        this.image = file;\r\n    }\r\n    buildForm() { }\r\n    async createHandler(moment) {\r\n        const formData = new FormData();\r\n        formData.append('title', moment.title);\r\n        formData.append('description', moment.description);\r\n        if (moment.image) {\r\n            formData.append('image', moment.image);\r\n        }\r\n        await this.momentService.createMoment(formData).subscribe();\r\n        this.messagesService.add(`Momento adicionado com sucesso!`);\r\n        this.router.navigate(['/']);\r\n    }\r\n}\r\nNewMomentComponent.ɵfac = function NewMomentComponent_Factory(t) { return new (t || NewMomentComponent)(i0.ɵɵdirectiveInject(i1.MomentService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.MessagesService)); };\r\nNewMomentComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: NewMomentComponent, selectors: [[\"app-new-moment\"]], decls: 6, vars: 1, consts: [[3, \"btnText\", \"onSubmit\"]], template: function NewMomentComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"h2\");\r\n        i0.ɵɵtext(1, \"Compartilhe o seu \");\r\n        i0.ɵɵelementStart(2, \"span\");\r\n        i0.ɵɵtext(3, \"momento\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵtext(4, \"!\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(5, \"app-moments-form\", 0);\r\n        i0.ɵɵlistener(\"onSubmit\", function NewMomentComponent_Template_app_moments_form_onSubmit_5_listener($event) { return ctx.createHandler($event); });\r\n        i0.ɵɵelementEnd();\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(5);\r\n        i0.ɵɵproperty(\"btnText\", ctx.btnText);\r\n    } }, styles: [\"h2[_ngcontent-%COMP%] {\\r\\n  text-align: center;\\r\\n  margin-bottom: 1em;\\r\\n  font-size: 2.2em;\\r\\n}\\r\\n\\r\\nh2[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\r\\n  color: #dec129;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5ldy1tb21lbnQuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGtCQUFrQjtFQUNsQixrQkFBa0I7RUFDbEIsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UsY0FBYztBQUNoQiIsImZpbGUiOiJuZXctbW9tZW50LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyJoMiB7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gIG1hcmdpbi1ib3R0b206IDFlbTtcclxuICBmb250LXNpemU6IDIuMmVtO1xyXG59XHJcblxyXG5oMiBzcGFuIHtcclxuICBjb2xvcjogI2RlYzEyOTtcclxufSJdfQ== */\"] });\r\n"]},"metadata":{},"sourceType":"module"}